= 実装サンプル）単純計算アプリケーション

https://github.com/totheralistair/SmallerWebHexagon[Smaller Web Hexagon] に
記載されているサンプルを Java で実装する。

入力値に対して対応するレートを使った計算を行い、計算結果と使用したレートを返却するアプリケーション

== システム概要図


== ユースケース

参考にした作成方法 : https://qiita.com/putan/items/580cbc6f136859f82edb[Quiita, ユースケースをモデリングする]

https://it-koala.com/usecasediagrams-1832

include::usecases.adoc[]



概要ユースケース図
詳細ユースケース図



値オブジェクト
エンティティ


== 設計

コアとなる下層から設計していく。

=== ドメイン層


==== ドメインオブジェクト

値オブジェクト

入力値
レート値
計算結果値


データ型
制約


集約ルートエンティティ

レート
id は入力値
レート値


==== サービス

プライマリポートのインターフェース

計算実行
入力 入力値
出力 計算結果値


==== リポジトリ

レートリポジトリ



== アプリケーション

=== ドメイン層



ポート 2 つだけの単純な構造


コンテキストは 1 つとする。


クラス図

[plantuml, target=class01, format=svg]
....
include::_uml/class01.puml[]
....









サービスとプライマリポートの扱いは調査中

サービスにポートとなるインターフェースとその実装の両方を含める？

=== サービス

ユースケースに応じてプライマリポートとセカンダリポートを繋げる役割を持つ。

プライマリポートの実装
セカンダリポートの呼び出し



=== ポート

ポートは入出力を定義
入出力はリクエストとレスポンス
レスポンスは結果そのものだけではなく、正常異常のステータスも必須

==== プライマリポート

ユーザサイドポート

入力値を受け取って計算結果とレートを返す。

DDD としての役割 サービス？
Java としての実装 インターフェース




==== セカンダリポート

データサイドポート

入力値を元にレートを取得

DDD におけるリポジトリ

インターフェースとして実装

DDD としての役割 リポジトリ
Java としての実装 インターフェース







== アダプタ

プライマリアダプタ
CUI アダプタ
HTTP アダプタ
テストアダプタ

セカンダリアダプタ
モック（インメモリ）アダプタ
ファイルシステムアダプタ


ポートの実装として実装


== アクター



プライマリアクター
ユーザ（人）
HTTP リクエスト
テストスクリプト


セカンダリアクター
モック（インメモリ）
ファイルシステム
DBMS







== ディレクトリ構成

レイヤーで記載した分類に合わせる。

* domain
** ports
* adapter












